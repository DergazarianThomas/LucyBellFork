<div class="flex">

  <div class="main-content">

    <form [formGroup]="productoForm" (ngSubmit)="onSubmit()">

      <div class="flex justify-between gap-4 mb-6">
        <!-- Image Uploads -->
        <div class="border-dashed border-2 border-gray-500 flex items-center justify-center w-full aspect-[4/3] max-w-72 cursor-pointer relative">
          <input type="file" (change)="onFileSelected($event, 0)" class="absolute inset-0 w-full h-full opacity-0 cursor-pointer" />
          <img *ngIf="imageUrls[0]" [src]="imageUrls[0]" alt="Selected Image 1" class="object-cover w-full h-full" />
          <svg *ngIf="!imageUrls[0]" width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
            <rect width="40" height="40" fill="url(#pattern0_268_13)" />
            <defs>
              <pattern id="pattern0_268_13" patternContentUnits="objectBoundingBox" width="1" height="1">
                <use xlink:href="#image0_268_13" transform="scale(0.0111111)" />
              </pattern>
              <image id="image0_268_13" width="90" height="90" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFoAAABaCAYAAAA4qEECAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEZklEQVR4nO2c3YtVVRTAf/XQnSyC6MEcox5i9CFKG9EUSkzyDwmEImh6qmv40GiPijoGfgz2F0SmhIjgu5pgaeVbT1YPpRYYNGbNjQXrwjDOuefsj/Ox910/WDAwl3PP/Fiz9l77rHvBMAzDMAzDMAzDMAzDMAzDKGEC+AC4AvwFDCwYqIvLwAzQC82i54DrJpay5PpOXXlnsknGSbZXZku5sDKBk4P3fURLTTbRODm45CP6nonGNdHEmTOWzXg5MNE0kzwmGhNN22Xqb+AIsAV4QuM1YA5YsIwmiuRbwCsj/t836GusdBCWyaMkL5VdNbOtRvOwFCkXVTlqovHOaKnJVdlqovEW/aSDaHmtlQ7qF/2UicZKR9djziGjP7OMxlv0gm7dytgI3DfRBGX1rRLZIvlnh+s5MxijWNB98lZdICW2abmomsmtiv4F2KMZM/wDJEM+Bn7tgOA6onHRp4BVI66/Cvi8A2KSFj3r8D6zHZCTpOhPPN6r3wFBSYn2kZybbGealJyTbGfqqsldqNmLwDVgHngP2A6sA1br4NAjwNPAC8DrwNu6/bsK/NeW6JiS65Qtci8C7wKT+PMM8A7wTZOi65AcW/aCbiNfIj7SHxxb1tQ4U0s9alj2F8Dz1I+UnbMpi/aV/ROwi+Z5K2XRrruRr3UhS4Yuia6S2bLY7dUdQxVkxPZNYD/wFXATuAv8ozVXfv5Rf7cP2BFj4DwF0aNkL+o2rQqbdFv3p0dJ+gM4CUyTueiVZIvk3ZQjci4ELq5L47yeRGYrernsTxnN4/rI6t+IkofxADisTU6WooeyzwCPUsx64EYNglf6WMUUmYoWHqMYGVK83YDkYfzuOJCTlOhRktv4xMI9H9mpil7fcCavlNlTuYueAL5tUfIwbuginK3ouQA50qR8CKzR+MjjCfjSOJSr6OnALZyIjfkg4kHF4ZzkRF8I/HeXLF7Os4HXPJeb6E2BQkb9LSHXlK711ZxEz3dUtMTxXET3PA+ImhJ9t6SxSkb0zggy6hQ90Ie/QW/QBfYnIHo2B9FnExB9mprfIGasK7jPm47NSCxcmpofUhK9uuA+b3s2I7HoVzz/KGTQsegV3GeVjIqZyT5NjcyWJPPFKL0A0SGTSWWsDRV9JaPS0ac+9oSWjpkOyB1EXAz7kTN7Uq8ZvBj29FnYoCOxs+A+z0S6fhG1b+/QL83riuyZgnvcl4DoSrPjPf0+t0stL5DzBfe3I/UWPBV6OkHUVdF3yg6VUmI+5WPSlJju8MF/lLGxLnE+UMqkZzNSNkKcHRv1gaivlL5nM1IUci8vkymHA8QsbWpcmpGiOEDGTOjH2gYtx3WXAZpUmdKzhbYk/wa8yJiwpcUhx82MGZs1u5qSfEe/TGUsmWrorObaOJWLUQvkocCtX1HINQ+GfrQiNzboLNxiBMGL2oxku0+OgczCndAJIp86fDzHtpoakRM1Ob6U4RY5mJenIPJYTJoUCfn5e+BLfc0bIadw/wPu2JvSbxz2XAAAAABJRU5ErkJggg==" />
            </defs>
          </svg>
        </div>
        <div class="border-dashed border-2 border-gray-500 flex items-center justify-center w-full aspect-[4/3] max-w-72 cursor-pointer relative">
          <input type="file" (change)="onFileSelected($event, 1)" class="absolute inset-0 w-full h-full opacity-0 cursor-pointer" />
          <img *ngIf="imageUrls[1]" [src]="imageUrls[1]" alt="Selected Image 1" class="object-cover w-full h-full" />
          <svg *ngIf="!imageUrls[1]" width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
            <rect width="40" height="40" fill="url(#pattern0_268_13)" />
            <defs>
              <pattern id="pattern0_268_13" patternContentUnits="objectBoundingBox" width="1" height="1">
                <use xlink:href="#image0_268_13" transform="scale(0.0111111)" />
              </pattern>
              <image id="image0_268_13" width="90" height="90" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFoAAABaCAYAAAA4qEECAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEZklEQVR4nO2c3YtVVRTAf/XQnSyC6MEcox5i9CFKG9EUSkzyDwmEImh6qmv40GiPijoGfgz2F0SmhIjgu5pgaeVbT1YPpRYYNGbNjQXrwjDOuefsj/Ox910/WDAwl3PP/Fiz9l77rHvBMAzDMAzDMAzDMAzDMAzDKGEC+AC4AvwFDCwYqIvLwAzQC82i54DrJpay5PpOXXlnsknGSbZXZku5sDKBk4P3fURLTTbRODm45CP6nonGNdHEmTOWzXg5MNE0kzwmGhNN22Xqb+AIsAV4QuM1YA5YsIwmiuRbwCsj/t836GusdBCWyaMkL5VdNbOtRvOwFCkXVTlqovHOaKnJVdlqovEW/aSDaHmtlQ7qF/2UicZKR9djziGjP7OMxlv0gm7dytgI3DfRBGX1rRLZIvlnh+s5MxijWNB98lZdICW2abmomsmtiv4F2KMZM/wDJEM+Bn7tgOA6onHRp4BVI66/Cvi8A2KSFj3r8D6zHZCTpOhPPN6r3wFBSYn2kZybbGealJyTbGfqqsldqNmLwDVgHngP2A6sA1br4NAjwNPAC8DrwNu6/bsK/NeW6JiS65Qtci8C7wKT+PMM8A7wTZOi65AcW/aCbiNfIj7SHxxb1tQ4U0s9alj2F8Dz1I+UnbMpi/aV/ROwi+Z5K2XRrruRr3UhS4Yuia6S2bLY7dUdQxVkxPZNYD/wFXATuAv8ozVXfv5Rf7cP2BFj4DwF0aNkL+o2rQqbdFv3p0dJ+gM4CUyTueiVZIvk3ZQjci4ELq5L47yeRGYrernsTxnN4/rI6t+IkofxADisTU6WooeyzwCPUsx64EYNglf6WMUUmYoWHqMYGVK83YDkYfzuOJCTlOhRktv4xMI9H9mpil7fcCavlNlTuYueAL5tUfIwbuginK3ouQA50qR8CKzR+MjjCfjSOJSr6OnALZyIjfkg4kHF4ZzkRF8I/HeXLF7Os4HXPJeb6E2BQkb9LSHXlK711ZxEz3dUtMTxXET3PA+ImhJ9t6SxSkb0zggy6hQ90Ie/QW/QBfYnIHo2B9FnExB9mprfIGasK7jPm47NSCxcmpofUhK9uuA+b3s2I7HoVzz/KGTQsegV3GeVjIqZyT5NjcyWJPPFKL0A0SGTSWWsDRV9JaPS0ac+9oSWjpkOyB1EXAz7kTN7Uq8ZvBj29FnYoCOxs+A+z0S6fhG1b+/QL83riuyZgnvcl4DoSrPjPf0+t0stL5DzBfe3I/UWPBV6OkHUVdF3yg6VUmI+5WPSlJju8MF/lLGxLnE+UMqkZzNSNkKcHRv1gaivlL5nM1IUci8vkymHA8QsbWpcmpGiOEDGTOjH2gYtx3WXAZpUmdKzhbYk/wa8yJiwpcUhx82MGZs1u5qSfEe/TGUsmWrorObaOJWLUQvkocCtX1HINQ+GfrQiNzboLNxiBMGL2oxku0+OgczCndAJIp86fDzHtpoakRM1Ob6U4RY5mJenIPJYTJoUCfn5e+BLfc0bIadw/wPu2JvSbxz2XAAAAABJRU5ErkJggg==" />
            </defs>
          </svg>
        </div>
        <div class="border-dashed border-2 border-gray-500 flex items-center justify-center w-full aspect-[4/3] max-w-72 cursor-pointer relative">
          <input type="file" (change)="onFileSelected($event, 2)" class="absolute inset-0 w-full h-full opacity-0 cursor-pointer" />
          <img *ngIf="imageUrls[2]" [src]="imageUrls[2]" alt="Selected Image 1" class="object-cover w-full h-full" />
          <svg *ngIf="!imageUrls[2]" width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
            <rect width="40" height="40" fill="url(#pattern0_268_13)" />
            <defs>
              <pattern id="pattern0_268_13" patternContentUnits="objectBoundingBox" width="1" height="1">
                <use xlink:href="#image0_268_13" transform="scale(0.0111111)" />
              </pattern>
              <image id="image0_268_13" width="90" height="90" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFoAAABaCAYAAAA4qEECAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEZklEQVR4nO2c3YtVVRTAf/XQnSyC6MEcox5i9CFKG9EUSkzyDwmEImh6qmv40GiPijoGfgz2F0SmhIjgu5pgaeVbT1YPpRYYNGbNjQXrwjDOuefsj/Ox910/WDAwl3PP/Fiz9l77rHvBMAzDMAzDMAzDMAzDMAzDKGEC+AC4AvwFDCwYqIvLwAzQC82i54DrJpay5PpOXXlnsknGSbZXZku5sDKBk4P3fURLTTbRODm45CP6nonGNdHEmTOWzXg5MNE0kzwmGhNN22Xqb+AIsAV4QuM1YA5YsIwmiuRbwCsj/t836GusdBCWyaMkL5VdNbOtRvOwFCkXVTlqovHOaKnJVdlqovEW/aSDaHmtlQ7qF/2UicZKR9djziGjP7OMxlv0gm7dytgI3DfRBGX1rRLZIvlnh+s5MxijWNB98lZdICW2abmomsmtiv4F2KMZM/wDJEM+Bn7tgOA6onHRp4BVI66/Cvi8A2KSFj3r8D6zHZCTpOhPPN6r3wFBSYn2kZybbGealJyTbGfqqsldqNmLwDVgHngP2A6sA1br4NAjwNPAC8DrwNu6/bsK/NeW6JiS65Qtci8C7wKT+PMM8A7wTZOi65AcW/aCbiNfIj7SHxxb1tQ4U0s9alj2F8Dz1I+UnbMpi/aV/ROwi+Z5K2XRrruRr3UhS4Yuia6S2bLY7dUdQxVkxPZNYD/wFXATuAv8ozVXfv5Rf7cP2BFj4DwF0aNkL+o2rQqbdFv3p0dJ+gM4CUyTueiVZIvk3ZQjci4ELq5L47yeRGYrernsTxnN4/rI6t+IkofxADisTU6WooeyzwCPUsx64EYNglf6WMUUmYoWHqMYGVK83YDkYfzuOJCTlOhRktv4xMI9H9mpil7fcCavlNlTuYueAL5tUfIwbuginK3ouQA50qR8CKzR+MjjCfjSOJSr6OnALZyIjfkg4kHF4ZzkRF8I/HeXLF7Os4HXPJeb6E2BQkb9LSHXlK711ZxEz3dUtMTxXET3PA+ImhJ9t6SxSkb0zggy6hQ90Ie/QW/QBfYnIHo2B9FnExB9mprfIGasK7jPm47NSCxcmpofUhK9uuA+b3s2I7HoVzz/KGTQsegV3GeVjIqZyT5NjcyWJPPFKL0A0SGTSWWsDRV9JaPS0ac+9oSWjpkOyB1EXAz7kTN7Uq8ZvBj29FnYoCOxs+A+z0S6fhG1b+/QL83riuyZgnvcl4DoSrPjPf0+t0stL5DzBfe3I/UWPBV6OkHUVdF3yg6VUmI+5WPSlJju8MF/lLGxLnE+UMqkZzNSNkKcHRv1gaivlL5nM1IUci8vkymHA8QsbWpcmpGiOEDGTOjH2gYtx3WXAZpUmdKzhbYk/wa8yJiwpcUhx82MGZs1u5qSfEe/TGUsmWrorObaOJWLUQvkocCtX1HINQ+GfrQiNzboLNxiBMGL2oxku0+OgczCndAJIp86fDzHtpoakRM1Ob6U4RY5mJenIPJYTJoUCfn5e+BLfc0bIadw/wPu2JvSbxz2XAAAAABJRU5ErkJggg==" />
            </defs>
          </svg>
        </div>
        <div class="border-dashed border-2 border-gray-500 flex items-center justify-center w-full aspect-[4/3] max-w-72 cursor-pointer relative">
          <input type="file" (change)="onFileSelected($event, 3)" class="absolute inset-0 w-full h-full opacity-0 cursor-pointer" />
          <img *ngIf="imageUrls[3]" [src]="imageUrls[3]" alt="Selected Image 1" class="object-cover w-full h-full" />
          <svg *ngIf="!imageUrls[3]" width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
            <rect width="40" height="40" fill="url(#pattern0_268_13)" />
            <defs>
              <pattern id="pattern0_268_13" patternContentUnits="objectBoundingBox" width="1" height="1">
                <use xlink:href="#image0_268_13" transform="scale(0.0111111)" />
              </pattern>
              <image id="image0_268_13" width="90" height="90" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFoAAABaCAYAAAA4qEECAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEZklEQVR4nO2c3YtVVRTAf/XQnSyC6MEcox5i9CFKG9EUSkzyDwmEImh6qmv40GiPijoGfgz2F0SmhIjgu5pgaeVbT1YPpRYYNGbNjQXrwjDOuefsj/Ox910/WDAwl3PP/Fiz9l77rHvBMAzDMAzDMAzDMAzDMAzDKGEC+AC4AvwFDCwYqIvLwAzQC82i54DrJpay5PpOXXlnsknGSbZXZku5sDKBk4P3fURLTTbRODm45CP6nonGNdHEmTOWzXg5MNE0kzwmGhNN22Xqb+AIsAV4QuM1YA5YsIwmiuRbwCsj/t836GusdBCWyaMkL5VdNbOtRvOwFCkXVTlqovHOaKnJVdlqovEW/aSDaHmtlQ7qF/2UicZKR9djziGjP7OMxlv0gm7dytgI3DfRBGX1rRLZIvlnh+s5MxijWNB98lZdICW2abmomsmtiv4F2KMZM/wDJEM+Bn7tgOA6onHRp4BVI66/Cvi8A2KSFj3r8D6zHZCTpOhPPN6r3wFBSYn2kZybbGealJyTbGfqqsldqNmLwDVgHngP2A6sA1br4NAjwNPAC8DrwNu6/bsK/NeW6JiS65Qtci8C7wKT+PMM8A7wTZOi65AcW/aCbiNfIj7SHxxb1tQ4U0s9alj2F8Dz1I+UnbMpi/aV/ROwi+Z5K2XRrruRr3UhS4Yuia6S2bLY7dUdQxVkxPZNYD/wFXATuAv8ozVXfv5Rf7cP2BFj4DwF0aNkL+o2rQqbdFv3p0dJ+gM4CUyTueiVZIvk3ZQjci4ELq5L47yeRGYrernsTxnN4/rI6t+IkofxADisTU6WooeyzwCPUsx64EYNglf6WMUUmYoWHqMYGVK83YDkYfzuOJCTlOhRktv4xMI9H9mpil7fcCavlNlTuYueAL5tUfIwbuginK3ouQA50qR8CKzR+MjjCfjSOJSr6OnALZyIjfkg4kHF4ZzkRF8I/HeXLF7Os4HXPJeb6E2BQkb9LSHXlK711ZxEz3dUtMTxXET3PA+ImhJ9t6SxSkb0zggy6hQ90Ie/QW/QBfYnIHo2B9FnExB9mprfIGasK7jPm47NSCxcmpofUhK9uuA+b3s2I7HoVzz/KGTQsegV3GeVjIqZyT5NjcyWJPPFKL0A0SGTSWWsDRV9JaPS0ac+9oSWjpkOyB1EXAz7kTN7Uq8ZvBj29FnYoCOxs+A+z0S6fhG1b+/QL83riuyZgnvcl4DoSrPjPf0+t0stL5DzBfe3I/UWPBV6OkHUVdF3yg6VUmI+5WPSlJju8MF/lLGxLnE+UMqkZzNSNkKcHRv1gaivlL5nM1IUci8vkymHA8QsbWpcmpGiOEDGTOjH2gYtx3WXAZpUmdKzhbYk/wa8yJiwpcUhx82MGZs1u5qSfEe/TGUsmWrorObaOJWLUQvkocCtX1HINQ+GfrQiNzboLNxiBMGL2oxku0+OgczCndAJIp86fDzHtpoakRM1Ob6U4RY5mJenIPJYTJoUCfn5e+BLfc0bIadw/wPu2JvSbxz2XAAAAABJRU5ErkJggg==" />
            </defs>
          </svg>
        </div>

      </div>

      <!-- Nombre -->
      <div class="mb-4">
        <label for="nombre" class="block text-gray-700 text-sm font-bold mb-2">Nombre</label>
        <input type="text" id="nombre" formControlName="nombre" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" placeholder="Ingrese nombre">
        <div *ngIf="productoForm.get('nombre')?.touched && productoForm.get('nombre')?.invalid">
          <small class="text-red-600">El nombre es obligatorio.</small>
        </div>
      </div>
    
      <!-- Categoria -->
      <div class="mb-4">
        <label for="categoria" class="block text-gray-700 text-sm font-bold mb-2">Categoria</label>
        <select id="categoria" formControlName="categoria" (change)="onCategoriaChange()" class="block appearance-none w-full bg-white border border-gray-300 text-gray-700 py-2 px-4 pr-8 rounded leading-tight focus:outline-none focus:bg-white">
          <option value="" selected disabled hidden>Seleccione una categoria</option>
          <option *ngFor="let categoria of categorias" [value]="categoria.id">{{ categoria.nombre }}</option>
        </select>
        <div *ngIf="productoForm.get('categoria')?.touched && productoForm.get('categoria')?.invalid">
          <small class="text-red-600">La categoria es obligatoria.</small>
        </div>
      </div>
    
      <!-- Material -->
      <div class="mb-4">
        <label for="material" class="block text-gray-700 text-sm font-bold mb-2">Material</label>
        <select id="material" formControlName="material" class="block appearance-none w-full bg-white border border-gray-300 text-gray-700 py-2 px-4 pr-8 rounded leading-tight focus:outline-none focus:bg-white">
          <option value="" selected>Seleccione un material</option>
          <option *ngFor="let material of materiales" [value]="material.id">{{ material.nombre }}</option>
        </select>
      </div>
    
      <!-- Subcategoria -->
      <div class="mb-4">
        <label for="subcategoria" class="block text-gray-700 text-sm font-bold mb-2">Subcategoria</label>
        <select id="subcategoria" formControlName="subcategoria" class="block appearance-none w-full bg-white border border-gray-300 text-gray-700 py-2 px-4 pr-8 rounded leading-tight focus:outline-none focus:bg-white">
          <option value="" selected>Seleccione una subcategoria</option>
          <option *ngFor="let subcategoria of subcategorias" [value]="subcategoria.id">{{ subcategoria.nombre }}</option>
        </select>
      </div>
    
      <!-- Descripcion -->
      <div class="mb-4">
        <label for="descripcion" class="block text-gray-700 text-sm font-bold mb-2">Descripcion</label>
        <textarea id="descripcion" formControlName="descripcion" rows="3" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" placeholder="Ingrese descripcion"></textarea>
      </div>
    
      <!-- Precio -->
      <div class="mb-4">
        <label for="precio" class="block text-gray-700 text-sm font-bold mb-2">Precio</label>
        <input type="number" id="precio" formControlName="precio" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" placeholder="Ingrese precio">
      </div>

      <div class="mb-4">
        <p class="modalSubtitle">Variantes actuales</p>
        <div class="flex flex-wrap gap-2" >
          <div *ngFor="let color of product?.variantesProducto" class="bg-violet-500 rounded-full p-2 text-white">
            <span>{{ color.color || 'Base' }}</span>
          </div>
          <div *ngIf="product?.variantesProducto?.length == 0" >
            <span>No hay variantes</span>
          </div>
        </div>
      </div>

      <div class="mb-4">
        <label for="nuevoColor" class="block text-gray-700 text-sm font-bold mb-2">Color</label>
        <div class="flex">
          <input type="text" id="nuevoColor" formControlName="nuevoColor" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" placeholder="Ej. Azul..">
          <button (click)="addColor()" class="px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition" type="button">+</button>
        </div>
        <p class="text-red-500">{{ errorMessage }}</p>

        <div *ngIf="variantes.length > 0" class="grid grid-cols-2 lg:grid-cols-4 gap-4 mt-4 mb-4">
          <div *ngFor="let variante of variantes" class="p-4 bg-white shadow rounded-full flex justify-between items-center">
            <span>{{ variante.color }}</span>
            <button (click)="removeColor(variante.color || '')" class="text-red-500 hover:text-red-700" type="button">x</button>
          </div>
        </div>
        
      </div>
    
      <!-- Submit Button -->
      <div class="flex justify-end">
        <button type="submit" class="bg-blue-500 hidden hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline">Actualizar Producto</button>
      </div>
    
    </form>
  </div>

</div>

  


