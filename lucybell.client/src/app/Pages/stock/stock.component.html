<div class="flex">
    <app-sidebarAdmin class="sidebar"></app-sidebarAdmin>
    <button 
      (click)="toggleChildSidebar()" 
      class="md:hidden fixed bottom-4 left-4 items-center text-sm p-2 text-gray-500  rounded-full bg-MyColor bg-MyHover outline outline-violet-400 z-20">
      <span class="sr-only">Open sidebar</span>
      <img src="../../../assets/icons/Menu.svg" alt="Menu">
    </button>

    <div class="main-content flex-1 p-4">

      <div class="flex">
        <div class="block">
          <h1 class="text-3xl inline-block absolute; max-md:pl-4 max-md:text-2xl max-md:pt-4" style="font-family: VollkornSC; display: inline-block;">
            Stock
            <div class="gradient-line-title mb-4"></div>
          </h1>
          <div class="flex">
            <p class="mb-10 max-md:ml-4">Administra el stock de tus productos</p>
          </div>
        </div>
      </div>

      <div class="grid grid-cols-2 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-2 grid-flow-row auto-rows-max max-md:pr-2 max-md:ml-2">
        <div *ngFor="let item of variantesConProducto" class="flex flex-col h-full">
          
          <div class="item-background p-4 shadow rounded text-white center flex-col h-full">
            <div>
              <div class="md:hidden flex justify-center mb-2">
                <div class="min-w-10 min-h-10 max-w-35 overflow-hidden rounded-full aspect-[4/4] ">
                  <img *ngIf="item.imagen" [src]="item.imagen" alt="imagen de {{item.productoNombre}}" class="w-full h-full object-cover" />
                </div>
              </div>
            </div>
            <div class="flex-grow flex">
              <div class="flex-grow flex">
                <div class="content-center">
                  <div class="max-md:hidden mr-2 ">
                    <div class="min-w-10 min-h-10 max-w-16 overflow-hidden rounded-full aspect-[4/4]">
                      <img *ngIf="item.imagen" [src]="item.imagen" alt="imagen de {{item.productoNombre}}" class="w-full h-full object-cover" />
                    </div>
                  </div>
                </div>

                <div class="flex-col max-sm:text-sm  flex-grow">
                  <div class="inline">
                    <h3 class="font-bold ">{{ item.productoNombre }}</h3>

                    <p > ({{ item.variante.color }})</p>
                  </div>
                  <div>
                    <p>Stock: {{ item.variante.cantidad }} </p>
                  </div>
                </div>
              </div>
              <div class="ml-2 flex flex-col justify-evenly">
                <button (click)="openEditStockModal(item.productoId, item.variante, item.productoNombre)" class="p-2">
                  <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
                    <rect width="20" height="20" fill="url(#pattern0_268_279)" />
                    <defs>
                      <pattern id="pattern0_268_279" patternContentUnits="objectBoundingBox" width="1" height="1">
                        <use xlink:href="#image0_268_279" transform="scale(0.0111111)" />
                      </pattern>
                      <image id="image0_268_279" width="90" height="90" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFoAAABaCAYAAAA4qEECAAAACXBIWXMAAAsTAAALEwEAmpwYAAAClUlEQVR4nO2dv2sUQRTH10L/mWgQrEQLMV2wC+9d/gIbO0VshKTIe3cIChYiVir+aKztbO3Uylb2vU0sNDaWamBlDgWJS8zldt96O98PTLl3Mx++t/tmZ4YrCgAAAAAAAAAA/y+0VZ5m9Sck9pHEv7PaDos9YqlO9t23wcBSXmOxPVav/272g8Su9N3HhYfEN5sF72tiN/vu6/AlK2THSYbsQMmQHSgZsgMlQ3ag5F8NpV+Q6FRnr018af/3ZQ11J/th32PLQjapVX2PKxfZ3/oeUx6yxbb7Hk8WskntcZGbOBLfnPWaOdO8ty7by0Uu0B/CImWT+tUiF6hJlPhkps8Y+40jlHUbRS7QQWnsVDYk193LhuS6+2RDct29bEiuu5cNyfVM5dgRSr9Zr1loqNUp82zJzgbq4vUmZEe9Q4bsGMmQHSg5d9kUKTlX2dSH5GlDnVxDMpK8WBBuF5A8CAhJhuRBQEgyJA8CQpIheRAgyQFAcgCQHAAkBwDJAUByAJAcACQHAMkBXH7w5jiN/cxIbIW27Ho6OBOxxkc5bdNqgrQ8C8lBCU/HdpHkAFjsC7YEBMDiH7DvIgBSf4sHXwCk/go7iAJg9RfYphUAi91GnRwAje0iJiNzQpPq1GFmZaNxeYHVb7H6MxJ/SeqvSfzdtCI5oPzLfsb3G1YbtyFkbeJLpP4Vkpuo62Osbm2lj9XuIMkN0MTPt/lTZ6nWcbtoFGP32zyWMBJbyWqn/aFfh4rttvkQo433J7rp7QIzUruEAzcBsNhznG4KgNU+4yhZAOlPBv65vKRWsfjdtLQV0adBkiqL5oeg7ZLYPRY7l+rsvvu58KQKIcmeJlv8E4k/ZS1XUzXSd98AAAAAAAAAABTz8RPoiEpw35pqPgAAAABJRU5ErkJggg==" />
                    </defs>
                  </svg>
                </button>
                <button  (click)="openDeleteStockModal(item.variante, item.productoNombre)" class="p-2">
                  <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                    <rect width="20" height="20" fill="url(#pattern0_268_282)" />
                    <defs>
                      <pattern id="pattern0_268_282" patternContentUnits="objectBoundingBox" width="1" height="1">
                        <use xlink:href="#image0_268_282" transform="scale(0.0111111)" />
                      </pattern>
                      <image id="image0_268_282" width="90" height="90" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFoAAABaCAYAAAA4qEECAAAACXBIWXMAAAsTAAALEwEAmpwYAAADD0lEQVR4nO2cTW9NURSGl48JA3NRH3fty0ix9mlEgjQMMTXAH8BITTCRmDCmVOdlyoBfwASz+gVIRO9a97ZNG5LW4MpOg+RKEx+73Wtt60neec9zd865ed/bA+A4juM4juM4Zfh0YF+LqT2WMkt7dvvnsAZwbB2XiIsSQ38luNhp8KjLzi46vPkpeSVM+MpFZxeNS7+IjrjkojMjA5K/x0UDQLqHMoXXTLi8mqjSSX9bugWZvd+nbwVMuFBapPy+8AWT32SYwtXS8uRPZUe8Ahr52GzfyoQPmMJ8aUmyZvLDHBPe/3BkaEsx0RzDZGkRsn7CJ4tI7gNsFApfSguQ9QqFz+maXXSsVPR/eOt4CKVIDwiOOJ4eGBULnpWI94o+DB3HcRzHcdafGvsOpjAP2hAKb0uLkfyZBm0IhecKxPSzhsIz0AZTmCguJuZNqoBBG90YbpQWI7nT4HXQhsTWhQpFnwedP3BRICfmS6fBY6CN2QZ3lRYjmdMbCTtBG/2zsIkJv5aWI5mSrqU/OroZNMIU3lcjOoZ3oBWh8LK0IMkVCi9AK0zhcTUnmsIj0ApTuFOPaLwNWpHYvlxakORKg5dAKxxbZ6o50Q2eBq3MNDhcWpBkSm8E94NWuofb20oLkkxJ1wKaqWEA4BjmQDuVDADToJ0qBgBSWPjXOACwxsK/ygGgUVj4VzkANAoL/0FSWV5cVPy3mPgPrRoGgJ7Gwr+2AYA1F/41DQCsufCvagAgxYV/TQMAay78axoAWHPhP0gqzUsLk78N4UWwQirNzZ7oBk+BFSwPAD3NhX9NA0BXe+FfwwDAFgr/SgaAabCGyQGADBT+NQwAbKHwHySV5/ZONF4Da6Ty3NyJPoTnwBoWB4COhcK/hgGgZ6Hwtz4AsKXC3/IAwJYKf9MDABkq/AfhiFN2TjROgVUsvTaTqT0GVukOt4c0v2lXfkjG5e7BvTvAMkLhloHbxk2wTnr7IUccLy1z1VC42wfYALUgEU8y4VOJoaNA7gxTeCJNOFHai+M4juM4juM4juM4DhjkG7dwMgP+Zui0AAAAAElFTkSuQmCC" />
                    </defs>
                  </svg>
                </button>
              </div>
            </div>
          </div>
          <ng-container>
            <app-two-button-modal #deleteModalStock
                                  [title]="'Eliminar Stock'"
                                  [confirmButtonText]="'Eliminar'"
                                  [confirmButtonColor]="'bg-red-600 hover:bg-red-700'"
                                  [icon]="customIconDelete"
                                  (confirm)="onDelete()"
                                  (cancel)="closeDeleteStockModal()">
              <div class="flex flex-col items-center">
                <p *ngIf="modalStock && selectedVariante?.color == null">¿Está seguro de que desea borrar el stock de <strong>"{{selectedProductoNombre}}"</strong>?</p> 
                <p *ngIf="modalStock && selectedVariante?.color != null">¿Está seguro de que desea borrar el stock <strong>"{{ selectedVariante?.color }}"</strong> de <strong>"{{selectedProductoNombre}}"</strong>?</p>
              </div>
            </app-two-button-modal>
          </ng-container>
          <ng-container>
            <app-two-button-modal #editModalStock
                                  [title]="'Editar Stock'"
                                  [confirmButtonText]="'Editar'"
                                  [confirmButtonColor]="'bg-blue-600 hover:bg-blue-700'"
                                  [icon]="customIconEdit"
                                  (confirm)="onEdit()"
                                  (cancel)="closeEditStockModal()">
              <div class="flex flex-col mb-2">
                <p *ngIf="modalStock && selectedVariante?.color == null">Editar stock de <strong>"{{selectedProductoNombre}}"</strong></p> 
                <p *ngIf="modalStock && selectedVariante?.color != null">Editar stock <strong>"{{ selectedVariante?.color }}"</strong> de <strong>"{{selectedProductoNombre}}"</strong></p>
              </div>
              <form>
                <label for="stockCantidad" class="block text-sm font-medium text-gray-700">Cantidad</label>
                <input type="number" placeholder="Stock" class="mt-1 block w-full border-gray-300 rounded-md p-2 shadow-sm border-2"  *ngIf="selectedVariante" [(ngModel)]="selectedVariante.cantidad" name="stockCantidad" min="0" required>
              </form>
            </app-two-button-modal>
          </ng-container>
        </div>
      </div>
      
    </div>
</div>
